# å¯åŠ¨æŒ‡å—

> æœ¬é¡¹ç›®æ”¯æŒä¸€ä½“åŒ–å¯åŠ¨ï¼Œå‰åç«¯åŒç«¯å£ï¼Œè‡ªåŠ¨åˆ†é…éšæœºç«¯å£ï¼Œé€‚åˆå†…ç½‘å¤šè®¾å¤‡åä½œã€‚

æœ¬æ–‡æ¡£æä¾›è¯¦ç»†çš„é¡¹ç›®å®‰è£…å’Œå¯åŠ¨æ­¥éª¤ã€‚

## ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, macOS 10.14+, Ubuntu 18.04+
- **Python**: 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**: 16.9.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆæ¨è 18+ï¼‰
- **npm**: 8.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬

### æ£€æŸ¥ç¯å¢ƒ

#### æ£€æŸ¥Pythonç‰ˆæœ¬
```bash
python --version
# æˆ–
python3 --version
```

#### æ£€æŸ¥Node.jsç‰ˆæœ¬
```bash
node --version
npm --version
```

## é¡¹ç›®ç»“æ„

```
project/
â”œâ”€â”€ backend/                 # Flaskåç«¯
â”‚   â”œâ”€â”€ api/                # APIæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ message.py      # æ¶ˆæ¯API
â”‚   â”‚   â”œâ”€â”€ file.py         # æ–‡ä»¶API
â”‚   â”‚   â””â”€â”€ video.py        # è§†é¢‘API
â”‚   â”œâ”€â”€ uploads/            # æ–‡ä»¶å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ videos/             # è§†é¢‘å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ app.py              # ä¸»åº”ç”¨
â”‚   â””â”€â”€ requirements.txt    # Pythonä¾èµ–
â”œâ”€â”€ frontend/               # Vue3å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/           # APIå°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ message.ts # æ¶ˆæ¯API
â”‚   â”‚   â”‚   â”œâ”€â”€ file.ts    # æ–‡ä»¶API
â”‚   â”‚   â”‚   â””â”€â”€ video.ts   # è§†é¢‘API
â”‚   â”‚   â””â”€â”€ App.vue        # ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ package.json       # Node.jsä¾èµ–
â”‚   â””â”€â”€ vite.config.ts     # Viteé…ç½®
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ start_backend.bat      # åç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_frontend.bat     # å‰ç«¯å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜
```

## å¿«é€Ÿå¯åŠ¨

### Windowsç”¨æˆ·ï¼ˆæ¨èï¼‰

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬
1. åŒå‡»è¿è¡Œ `start_backend.bat`
2. ç­‰å¾…åç«¯å¯åŠ¨å®Œæˆ
3. æ‰“å¼€æ–°çš„å‘½ä»¤æç¤ºç¬¦çª—å£
4. åŒå‡»è¿è¡Œ `start_frontend.bat`
5. ç­‰å¾…å‰ç«¯å¯åŠ¨å®Œæˆ
6. åœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://localhost:å®é™…ç«¯å£`ï¼ˆç«¯å£ä¸ºéšæœºåˆ†é…ï¼Œ10000~65535ï¼‰

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
```cmd
# 1. å¯åŠ¨åç«¯
cd backend
pip install -r requirements.txt
python app.py

# 2. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend
npm install
npm run dev
```

### macOS/Linuxç”¨æˆ·

```bash
# 1. å¯åŠ¨åç«¯
cd backend
pip3 install -r requirements.txt
python3 app.py

# 2. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend
npm install
npm run dev
```

## è¯¦ç»†å®‰è£…æ­¥éª¤

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <é¡¹ç›®åœ°å€>
cd <é¡¹ç›®ç›®å½•>
```

### 2. åç«¯å®‰è£…

#### å®‰è£…Pythonä¾èµ–
```bash
cd backend
pip install -r requirements.txt
```

#### æ£€æŸ¥ä¾èµ–å®‰è£…
```bash
pip list | grep -E "(Flask|flask-cors|werkzeug)"
```

#### åˆ›å»ºå¿…è¦ç›®å½•
```bash
# ç¡®ä¿uploadså’Œvideosç›®å½•å­˜åœ¨
mkdir -p uploads videos
```

### 3. å‰ç«¯å®‰è£…

#### å®‰è£…Node.jsä¾èµ–
```bash
cd frontend
npm install
```

#### æ£€æŸ¥ä¾èµ–å®‰è£…
```bash
npm list --depth=0
```

### 4. å¯åŠ¨æœåŠ¡

#### å¯åŠ¨åç«¯
```bash
cd backend
python app.py
```

**é¢„æœŸè¾“å‡º**:
```
 * Serving Flask app 'app'
 * Debug mode: on
 * Running on http://0.0.0.0:8000
```

#### å¯åŠ¨å‰ç«¯
```bash
cd frontend
npm run dev
```

**é¢„æœŸè¾“å‡º**:
```
  VITE v4.x.x  ready in xxx ms

  âœ  Local:   http://localhost:å®é™…ç«¯å£/
  âœ  Network: http://0.0.0.0:å®é™…ç«¯å£/
```

## è®¿é—®åº”ç”¨

### æœ¬åœ°è®¿é—®
- **å‰ç«¯ç•Œé¢**: http://localhost:å®é™…ç«¯å£ï¼ˆç«¯å£ä¸ºéšæœºåˆ†é…ï¼Œ10000~65535ï¼‰
- **åç«¯API**: http://localhost:8000

### å†…ç½‘è®¿é—®
- **å‰ç«¯ç•Œé¢**: http://[ä½ çš„IPåœ°å€]:å®é™…ç«¯å£ï¼ˆç«¯å£ä¸ºéšæœºåˆ†é…ï¼Œ10000~65535ï¼‰
- **åç«¯API**: http://[ä½ çš„IPåœ°å€]:8000

### è·å–æœ¬æœºIPåœ°å€

#### Windows
```cmd
ipconfig
```

#### macOS/Linux
```bash
ifconfig
# æˆ–
ip addr show
```

## åŠŸèƒ½æµ‹è¯•

### 1. æ¶ˆæ¯åŠŸèƒ½æµ‹è¯•
1. åœ¨æ¶ˆæ¯è¾“å…¥æ¡†è¾“å…¥æµ‹è¯•å†…å®¹
2. ç‚¹å‡»"å‘é€æ¶ˆæ¯"æŒ‰é’®
3. æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦æ˜¾ç¤ºåœ¨å³ä¾§
4. ç‚¹å‡»"æŸ¥çœ‹å†å²"æŸ¥çœ‹å†å²è®°å½•

### 2. æ–‡ä»¶åŠŸèƒ½æµ‹è¯•
1. ç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"ä¸Šä¼ ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶
2. ç‚¹å‡»"ä¸Šä¼ æ–‡ä»¶"æŒ‰é’®
3. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å‡ºç°åœ¨æ–‡ä»¶åˆ—è¡¨ä¸­
4. ç‚¹å‡»"é¢„è§ˆ"æµ‹è¯•é¢„è§ˆåŠŸèƒ½
5. ç‚¹å‡»"ä¸‹è½½"æµ‹è¯•ä¸‹è½½åŠŸèƒ½

### 3. è§†é¢‘åŠŸèƒ½æµ‹è¯•
1. ç‚¹å‡»"é€‰æ‹©è§†é¢‘"ä¸Šä¼ ä¸€ä¸ªè§†é¢‘æ–‡ä»¶
2. ç‚¹å‡»"ä¸Šä¼ è§†é¢‘"æŒ‰é’®
3. æ£€æŸ¥è§†é¢‘æ˜¯å¦å‡ºç°åœ¨è§†é¢‘åˆ—è¡¨ä¸­
4. ç‚¹å‡»"é¢„è§ˆ"æµ‹è¯•è§†é¢‘æ’­æ”¾
5. ç‚¹å‡»"ä¸‹è½½"æµ‹è¯•ä¸‹è½½åŠŸèƒ½

## å¸¸è§é—®é¢˜

### åç«¯é—®é¢˜

#### Q: Pythonç‰ˆæœ¬ä¸å…¼å®¹
**A**: ç¡®ä¿ä½¿ç”¨Python 3.7+
```bash
python --version
```

#### Q: ä¾èµ–å®‰è£…å¤±è´¥
**A**: å°è¯•ä½¿ç”¨å›½å†…é•œåƒ
```bash
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

#### Q: ç«¯å£8000è¢«å ç”¨
**A**: ä¿®æ”¹ç«¯å£æˆ–å…³é—­å ç”¨è¿›ç¨‹
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -ano | findstr :8000
# ä¿®æ”¹app.pyä¸­çš„ç«¯å£å·
```

#### Q: æƒé™é”™è¯¯
**A**: ç¡®ä¿æœ‰å†™å…¥æƒé™
```bash
# Windows: ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ
# Linux/macOS: æ£€æŸ¥ç›®å½•æƒé™
ls -la backend/
```

### å‰ç«¯é—®é¢˜

#### Q: Node.jsç‰ˆæœ¬è¿‡ä½
**A**: å‡çº§Node.jsåˆ°16.9.0+
```bash
node --version
# å»ºè®®å‡çº§åˆ°18+
```

#### Q: npmå®‰è£…å¤±è´¥
**A**: æ¸…é™¤ç¼“å­˜æˆ–ä½¿ç”¨å›½å†…é•œåƒ
```bash
npm cache clean --force
npm install --registry=https://registry.npmmirror.com
```

#### Q: å‰ç«¯ç«¯å£è¢«å ç”¨
**A**: Viteä¼šè‡ªåŠ¨é€‰æ‹©å…¶ä»–ç«¯å£ï¼Œæˆ–æ‰‹åŠ¨æŒ‡å®š
```bash
npm run dev -- --port 3000
```

#### Q: æ— æ³•è®¿é—®å†…ç½‘
**A**: æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
```bash
# Windows: å…è®¸åº”ç”¨é€šè¿‡é˜²ç«å¢™
# Linux: å¼€æ”¾ç«¯å£
sudo ufw allow å®é™…ç«¯å£
```

### ç½‘ç»œé—®é¢˜

#### Q: å‰ç«¯æ— æ³•è¿æ¥åç«¯
**A**: æ£€æŸ¥åç«¯æ˜¯å¦æ­£å¸¸å¯åŠ¨
```bash
curl http://localhost:8000/api/message/
```

#### Q: è·¨åŸŸé”™è¯¯
**A**: ç¡®ä¿åç«¯CORSé…ç½®æ­£ç¡®
```python
# backend/app.py
CORS(app)
```

#### Q: å†…ç½‘å…¶ä»–è®¾å¤‡æ— æ³•è®¿é—®
**A**: æ£€æŸ¥ç½‘ç»œé…ç½®
```bash
# ç¡®ä¿é˜²ç«å¢™å…è®¸ç«¯å£è®¿é—®
# æ£€æŸ¥è·¯ç”±å™¨è®¾ç½®
```

## æ€§èƒ½ä¼˜åŒ–

### åç«¯ä¼˜åŒ–
1. **ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²**: ä½¿ç”¨Gunicornæˆ–uWSGI
2. **é™æ€æ–‡ä»¶æœåŠ¡**: é…ç½®Nginx
3. **æ•°æ®åº“**: è€ƒè™‘ä½¿ç”¨SQLiteæˆ–MySQL
4. **ç¼“å­˜**: æ·»åŠ Redisç¼“å­˜

### å‰ç«¯ä¼˜åŒ–
1. **æ„å»ºä¼˜åŒ–**: ä½¿ç”¨ç”Ÿäº§æ„å»º
```bash
npm run build
```
2. **CDN**: ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æº
3. **å‹ç¼©**: å¯ç”¨Gzipå‹ç¼©
4. **ç¼“å­˜**: é…ç½®æµè§ˆå™¨ç¼“å­˜

## ç”Ÿäº§éƒ¨ç½²

### Dockeréƒ¨ç½²
```dockerfile
# åç«¯Dockerfile
FROM python:3.9-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
EXPOSE 8000
CMD ["python", "app.py"]
```

### ç³»ç»ŸæœåŠ¡
```ini
# /etc/systemd/system/internal-share.service
[Unit]
Description=Internal Share Backend
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/path/to/backend
ExecStart=/usr/bin/python3 app.py
Restart=always

[Install]
WantedBy=multi-user.target
```

## ç›‘æ§å’Œç»´æŠ¤

### æ—¥å¿—ç›‘æ§
```bash
# åç«¯æ—¥å¿—
tail -f backend/app.log

# å‰ç«¯æ—¥å¿—
npm run dev 2>&1 | tee frontend.log
```

### ç£ç›˜ç©ºé—´ç›‘æ§
```bash
# æ£€æŸ¥uploadså’Œvideosç›®å½•å¤§å°
du -sh backend/uploads/
du -sh backend/videos/
```

### å®šæœŸæ¸…ç†
```bash
# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
find backend/uploads/ -name "*.tmp" -delete
find backend/videos/ -name "*.tmp" -delete
```

## å®‰å…¨å»ºè®®

1. **é˜²ç«å¢™é…ç½®**: åªå¼€æ”¾å¿…è¦ç«¯å£
2. **æ–‡ä»¶ç±»å‹é™åˆ¶**: ä¸¥æ ¼é™åˆ¶ä¸Šä¼ æ–‡ä»¶ç±»å‹
3. **æ–‡ä»¶å¤§å°é™åˆ¶**: é˜²æ­¢è¶…å¤§æ–‡ä»¶æ”»å‡»
4. **è®¿é—®æ§åˆ¶**: è€ƒè™‘æ·»åŠ ç”¨æˆ·è®¤è¯
5. **HTTPS**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨HTTPS
6. **å®šæœŸå¤‡ä»½**: å¤‡ä»½é‡è¦æ•°æ®

## æ•…éšœæ’é™¤

### è¯Šæ–­æ­¥éª¤
1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
3. æµ‹è¯•ç½‘ç»œè¿æ¥
4. éªŒè¯é…ç½®æ–‡ä»¶
5. é‡å¯æœåŠ¡

### è·å–å¸®åŠ©
- æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£
- æ£€æŸ¥GitHub Issues
- è”ç³»å¼€å‘è€…

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰ 

å¦‚æœ‰æ›´å¤šé—®é¢˜è¯·æŸ¥é˜… [FAQ.md](FAQ.md) æˆ–è”ç³»ç»´æŠ¤è€…ã€‚ 