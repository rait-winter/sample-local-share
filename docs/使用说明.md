# 内网文件共享工具 - 使用说明

## 📖 快速上手

### 首次使用

1. **启动应用**
   - Windows: 双击 `start.bat`
   - macOS/Linux: 运行 `./start.sh`

2. **查看启动信息**
   - 启动后会弹出对话框显示访问地址
   - 点击"打开浏览器"可直接访问

3. **访问应用**
   - 本机访问: http://localhost:实际端口（端口为随机分配，10000~65535）
   - 局域网访问: http://[本机IP]:实际端口（端口为随机分配，10000~65535）

### 基本功能

#### 💬 消息管理
- **发送消息**: 在文本框中输入内容，点击"发送消息"或按 Ctrl+Enter
- **查看历史**: 点击"查看历史"显示最近50条消息
- **复制消息**: 点击消息旁的"复制"按钮

#### 📁 文件管理
- **上传文件**: 拖拽文件到上传区域或点击"选择文件"
- **预览文件**: 支持图片和文本文件在线预览
- **下载文件**: 点击文件列表中的下载按钮
- **删除文件**: 点击删除按钮，确认后删除

#### 🎥 视频管理
- **上传视频**: 支持MP4、AVI、MOV等格式
- **在线播放**: 点击预览按钮在线播放视频
- **下载视频**: 点击下载按钮保存到本地

## ⚙️ 配置管理

### 使用配置工具

```bash
python config_manager.py
```

配置工具提供以下功能：
1. **查看当前配置** - 显示所有配置项
2. **修改配置** - 交互式修改配置
3. **重置配置** - 恢复默认设置

### 常用配置项

#### 应用信息
- `app_name`: 应用名称（显示在界面标题）
- `company_name`: 公司名称（显示在版本信息）
- `version`: 版本号
- `description`: 应用描述

#### 网络设置
- `backend_port`: 后端服务端口（默认5000）
- `frontend_port`: 前端服务端口（默认随机分配，10000~65535）

#### 功能开关
- `auto_start`: 开机自启动（true/false）
- `show_startup_info`: 显示启动信息（true/false）

#### 文件设置
- `max_file_size`: 最大文件大小（字节）
- `allowed_extensions`: 允许的文件扩展名

## 🔧 高级功能

### 开机自启动

#### Windows
- 应用会自动在注册表中添加启动项
- 位置: `HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run`
- 禁用: 在配置中设置 `auto_start: false`

#### macOS
- 自动创建 LaunchAgent 配置文件
- 位置: `~/Library/LaunchAgents/`
- 管理: 系统偏好设置 → 用户与群组 → 登录项

#### Linux
- 自动创建桌面文件到自启动目录
- 位置: `~/.config/autostart/`
- 管理: 桌面环境的启动应用程序设置

### 局域网访问

#### 自动获取IP
应用会自动获取本机IP地址，局域网内的其他设备可以通过以下方式访问：
- 前端界面: http://[本机IP]:实际端口（端口为随机分配，10000~65535）
- 后端API: http://[本机IP]:5000

#### 防火墙设置

**Windows**
1. 控制面板 → 系统和安全 → Windows Defender 防火墙
2. 允许应用通过防火墙
3. 添加 Python 和 Node.js

**macOS**
1. 系统偏好设置 → 安全性与隐私 → 防火墙
2. 点击"防火墙选项"
3. 添加 Python 和 Node.js

**Linux**
```bash
# Ubuntu/Debian
sudo ufw allow 5000
sudo ufw allow 实际端口

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=5000/tcp
sudo firewall-cmd --permanent --add-port=实际端口/tcp
sudo firewall-cmd --reload
```

## 🚀 启动方式

### 一键启动（推荐）
- **Windows**: 双击 `start.bat`
- **macOS/Linux**: 运行 `./start.sh`

### 命令行启动
```bash
# 同时启动前后端
python start.py

# 仅启动后端
python start.py backend

# 仅启动前端
python start.py frontend

# 查看帮助
python start.py help
```

### 分别启动
```bash
# 启动后端
cd backend
python app.py

# 启动前端（新终端）
cd frontend
npm install
npm run dev -- --host 0.0.0.0
```

## 📱 界面说明

### 顶部栏
- **应用标题**: 显示配置的应用名称
- **版本信息**: 显示版本号和公司名称
- **访问地址**: 显示本机访问地址，可一键复制
- **设置按钮**: 打开设置对话框

### 消息管理区
- **发送区域**: 多行文本框，支持 Ctrl+Enter 快速发送
- **当前消息**: 显示最新接收的消息
- **历史记录**: 可展开查看最近50条消息

### 文件管理区
- **上传区域**: 支持拖拽上传和点击选择
- **文件列表**: 显示文件名、大小、修改时间
- **操作按钮**: 预览、下载、删除、详情

### 视频管理区
- **上传区域**: 支持视频文件上传
- **视频列表**: 显示视频信息
- **播放功能**: 在线视频播放

## 🔒 安全注意事项

### 使用环境
- **仅限内网使用**: 本工具设计用于内网环境
- **无用户认证**: 不支持用户登录，请在内网安全环境下使用
- **文件存储**: 上传的文件存储在本地，注意磁盘空间

### 安全建议
1. **定期清理**: 定期删除不需要的文件
2. **文件类型**: 注意上传文件的安全性
3. **网络隔离**: 确保在内网环境中使用
4. **权限控制**: 根据需要设置文件访问权限

## 🐛 常见问题

### 启动问题

**Q: 启动时提示端口被占用**
A: 修改配置文件中的端口号，或关闭占用端口的程序

**Q: 无法访问局域网**
A: 检查防火墙设置，确保在同一局域网内

**Q: 开机自启动失败**
A: 检查系统权限设置，或手动添加启动项

### 功能问题

**Q: 文件上传失败**
A: 检查文件大小是否超过限制，文件类型是否在允许列表中

**Q: 视频无法播放**
A: 确保浏览器支持视频格式，检查视频文件是否完整

**Q: 消息发送失败**
A: 检查网络连接，确保后端服务正常运行

### 网络问题

**Q: 其他设备无法访问**
A: 检查防火墙设置，确保端口已开放

**Q: 访问速度慢**
A: 检查网络带宽，大文件传输可能需要较长时间

## 📞 技术支持

如遇到问题，请：
1. 查看命令行输出的错误信息
2. 检查配置文件设置
3. 提交 GitHub Issue
4. 联系技术支持

---

**享受便捷的内网共享体验！** 🎉 